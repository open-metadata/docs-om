---
title: Run dbt Workflow Externally | OpenMetadata Guide
description: Run dbt workflows externally to sync metadata from CI/CD systems or scheduled orchestrations.
slug: /connectors/database/dbt/run-dbt-workflow-externally
sidebarTitle: Run Externally
mode: "wide"
---

import { ConnectorDetailsHeader } from '/snippets/components/ConnectorDetailsHeader/ConnectorDetailsHeader.jsx'
import { CodePreview, ContentPanel, ContentSection, CodePanel } from '/snippets/components/CodePreview.jsx'
import DbtPrefixDef from '/snippets/connectors/yaml/dbt/dbt-prefix-def.mdx'
import SourceConfigDef from '/snippets/connectors/yaml/dbt/source-config-def.mdx'
import DbtPrefix from '/snippets/connectors/yaml/dbt/dbt-prefix.mdx'
import SourceConfig from '/snippets/connectors/yaml/dbt/source-config.mdx'
import AwsConfigDef from '/snippets/connectors/yaml/common/aws-config-def.mdx'
import IngestionSinkDef from '/snippets/connectors/yaml/ingestion-sink-def.mdx'
import WorkflowConfigDef from '/snippets/connectors/yaml/workflow-config-def.mdx'
import IngestionSink from '/snippets/connectors/yaml/ingestion-sink.mdx'
import WorkflowConfig from '/snippets/connectors/yaml/workflow-config.mdx'
import AwsConfig from '/snippets/connectors/yaml/common/aws-config.mdx'
import IngestionCli from '/snippets/connectors/yaml/ingestion-cli.mdx'
import PythonRequirements from '/snippets/connectors/python-requirements.mdx'
import ExternalIngestionDeployment from '/snippets/connectors/external-ingestion-deployment.mdx'

<ConnectorDetailsHeader
icon='/public/images/connectors/dbt.webp'
name="dbt"
stage="PROD"
availableFeatures={["Metadata", "Queries", "Lineage", "Tags", "Tiers", "Domains", "Custom Properties", "Glossary", "Owners", "Descriptions", "Tests", "Exposures"]} />

In this section, we provide guides and references to run the dbt workflow externally.

- [Requirements](#requirements)
- [Python Requirements](#python-requirements)
- [dbt Ingestion](#dbt-ingestion)
- [Run with the CLI](#2.-run-with-the-cli)

<ExternalIngestionDeployment />

## Requirements
You must have access to dbt artifacts. At minimum, the `manifest.json` file is required. The `catalog.json` and `run_results.json` files are optional but recommended for richer metadata.

For dbt Cloud, create a service token with the `Account Viewer` permission and collect the account, project, and job IDs if you want to target a specific run.

## Python Requirements
<PythonRequirements />

To run the dbt ingestion, install:

```bash
pip3 install "openmetadata-ingestion[dbt]"
```

## dbt Ingestion
All connectors are defined as JSON Schemas. You can find the structure for dbt workflows in the OpenMetadata spec repository.

### 1. Define the YAML Config

Choose one of the following dbt artifact sources:
- [AWS S3 Buckets](#1.-aws-s3-buckets)
- [Google Cloud Storage Buckets](#2.-google-cloud-storage-buckets)
- [Azure Storage Buckets](#3.-azure-storage-buckets)
- [Local Storage](#4.-local-storage)
- [File Server](#5.-file-server)
- [dbt Cloud](#6.-dbt-cloud)

### 1. dbt Core: AWS S3 Buckets
In this configuration we fetch dbt artifacts from an S3 bucket.

<CodePreview>
<ContentPanel>
<ContentSection id={1} title="Source Configuration" lines="1-3">
Configure the source type and service name for your dbt workflow.
</ContentSection>

<ContentSection id={2} title="dbt Config Source" lines="7-42">
Set `dbtConfigType` to `s3` and provide AWS credentials or a region.

<AwsConfigDef />

<DbtPrefixDef />

<SourceConfigDef />
</ContentSection>

<ContentSection id={3} title="Sink Configuration" lines="43-45">
<IngestionSinkDef />
</ContentSection>

<ContentSection id={4} title="Workflow Configuration" lines="46-62">
<WorkflowConfigDef />
</ContentSection>
</ContentPanel>

<CodePanel fileName="dbt_config.yaml">

```yaml
source:
  type: dbt
  serviceName: service_name
  sourceConfig:
    config:
      type: DBT
      dbtConfigSource:
        dbtConfigType: s3
        dbtSecurityConfig:
          awsConfig:
            awsRegion: us-east-2
```

<AwsConfig />

<DbtPrefix />

<SourceConfig />

<IngestionSink />

<WorkflowConfig />

</CodePanel>
</CodePreview>

### 2. dbt Core: Google Cloud Storage Buckets
In this configuration we fetch dbt artifacts from a GCS bucket.

<CodePreview>
<ContentPanel>
<ContentSection id={1} title="Source Configuration" lines="1-6">
Configure the source type and service name for your dbt workflow.
</ContentSection>

<ContentSection id={2} title="dbt Config Source" lines="7-33">
Set `dbtConfigType` to `gcs` and provide either a credentials file path or inline credentials.

<DbtPrefixDef />

<SourceConfigDef />
</ContentSection>

<ContentSection id={3} title="Sink Configuration" lines="34-36">
<IngestionSinkDef />
</ContentSection>

<ContentSection id={4} title="Workflow Configuration" lines="37-53">
<WorkflowConfigDef />
</ContentSection>
</ContentPanel>

<CodePanel fileName="dbt_config.yaml">

```yaml
source:
  type: dbt
  serviceName: service_name
  sourceConfig:
    config:
      type: DBT
      dbtConfigSource:
        dbtConfigType: gcs
        dbtSecurityConfig:
          gcpConfig:
            gcpCredentialsPath: /path/to/service-account.json
```

<DbtPrefix />

<SourceConfig />

<IngestionSink />

<WorkflowConfig />

</CodePanel>
</CodePreview>

### 3. dbt Core: Azure Storage Buckets
In this configuration we fetch dbt artifacts from Azure Storage.

<CodePreview>
<ContentPanel>
<ContentSection id={1} title="Source Configuration" lines="1-6">
Configure the source type and service name for your dbt workflow.
</ContentSection>

<ContentSection id={2} title="dbt Config Source" lines="7-35">
Set `dbtConfigType` to `azure` and provide Azure AD credentials.

<DbtPrefixDef />

<SourceConfigDef />
</ContentSection>

<ContentSection id={3} title="Sink Configuration" lines="36-38">
<IngestionSinkDef />
</ContentSection>

<ContentSection id={4} title="Workflow Configuration" lines="39-55">
<WorkflowConfigDef />
</ContentSection>
</ContentPanel>

<CodePanel fileName="dbt_config.yaml">

```yaml
source:
  type: dbt
  serviceName: service_name
  sourceConfig:
    config:
      type: DBT
      dbtConfigSource:
        dbtConfigType: azure
        dbtSecurityConfig:
          clientId: client-id
          clientSecret: client-secret
          tenantId: tenant-id
          accountName: account-name
```

<DbtPrefix />

<SourceConfig />

<IngestionSink />

<WorkflowConfig />

</CodePanel>
</CodePreview>

### 4. dbt Core: Local Storage
In this configuration we fetch dbt artifacts from the machine running the ingestion.

<CodePreview>
<ContentPanel>
<ContentSection id={1} title="Source Configuration" lines="1-6">
Configure the source type and service name for your dbt workflow.
</ContentSection>

<ContentSection id={2} title="dbt Config Source" lines="7-30">
Set `dbtConfigType` to `local` and provide file paths for dbt artifacts.

<SourceConfigDef />
</ContentSection>

<ContentSection id={3} title="Sink Configuration" lines="31-33">
<IngestionSinkDef />
</ContentSection>

<ContentSection id={4} title="Workflow Configuration" lines="34-50">
<WorkflowConfigDef />
</ContentSection>
</ContentPanel>

<CodePanel fileName="dbt_config.yaml">

```yaml
source:
  type: dbt
  serviceName: service_name
  sourceConfig:
    config:
      type: DBT
      dbtConfigSource:
        dbtConfigType: local
        dbtCatalogFilePath: /path/to/catalog.json
        dbtManifestFilePath: /path/to/manifest.json
        dbtRunResultsFilePath: /path/to/run_results.json
```

<SourceConfig />

<IngestionSink />

<WorkflowConfig />

</CodePanel>
</CodePreview>

### 5. dbt Core: File Server
In this configuration we fetch dbt artifacts from an HTTP or file server.

<CodePreview>
<ContentPanel>
<ContentSection id={1} title="Source Configuration" lines="1-6">
Configure the source type and service name for your dbt workflow.
</ContentSection>

<ContentSection id={2} title="dbt Config Source" lines="7-30">
Set `dbtConfigType` to `http` and provide HTTP URLs for dbt artifacts.

<SourceConfigDef />
</ContentSection>

<ContentSection id={3} title="Sink Configuration" lines="31-33">
<IngestionSinkDef />
</ContentSection>

<ContentSection id={4} title="Workflow Configuration" lines="34-50">
<WorkflowConfigDef />
</ContentSection>
</ContentPanel>

<CodePanel fileName="dbt_config.yaml">

```yaml
source:
  type: dbt
  serviceName: service_name
  sourceConfig:
    config:
      type: DBT
      dbtConfigSource:
        dbtConfigType: http
        dbtCatalogHttpPath: https://example.com/catalog.json
        dbtManifestHttpPath: https://example.com/manifest.json
        dbtRunResultsHttpPath: https://example.com/run_results.json
```

<SourceConfig />

<IngestionSink />

<WorkflowConfig />

</CodePanel>
</CodePreview>

### 6. dbt Cloud: API-Based Ingestion
In this configuration we fetch dbt artifacts from dbt Cloud APIs.

<Tip>
The dbt Cloud workflow uses the dbt Cloud v2 APIs to retrieve the latest successful run and download artifacts.
</Tip>

<CodePreview>
<ContentPanel>
<ContentSection id={1} title="Source Configuration" lines="1-6">
Configure the source type and service name for your dbt workflow.
</ContentSection>

<ContentSection id={2} title="dbt Config Source" lines="7-32">
Set `dbtConfigType` to `cloud` and provide your dbt Cloud credentials and identifiers.

<SourceConfigDef />
</ContentSection>

<ContentSection id={3} title="Sink Configuration" lines="33-35">
<IngestionSinkDef />
</ContentSection>

<ContentSection id={4} title="Workflow Configuration" lines="36-52">
<WorkflowConfigDef />
</ContentSection>
</ContentPanel>

<CodePanel fileName="dbt_config.yaml">

```yaml
source:
  type: dbt
  serviceName: service_name
  sourceConfig:
    config:
      type: DBT
      dbtConfigSource:
        dbtConfigType: cloud
        dbtCloudAuthToken: AUTH_TOKEN
        dbtCloudAccountId: ACCOUNT_ID
        dbtCloudProjectId: PROJECT_ID
        dbtCloudJobId: JOB_ID
        dbtCloudUrl: https://cloud.getdbt.com
```

<SourceConfig />

<IngestionSink />

<WorkflowConfig />

</CodePanel>
</CodePreview>

<IngestionCli />
